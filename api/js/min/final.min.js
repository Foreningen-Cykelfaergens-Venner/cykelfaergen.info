function conversionTracking(type,label){if('undefined'!==typeof fbq&&'undefined'!==typeof twq&&'undefined'!==typeof gtag){fbq('trackCustom',type,{product:label});twq('track',type,{product:label});gtag('event','click',{'send_to':'UA-179038498-3','event_label':label,'event_type':type,'event_category':'Bookings','transport_type':'beacon','event_callback':function(){if(typeof(url)!='undefined'){alert("Reported")}}});}
return false;}
var acc=document.querySelectorAll(".accordion");var i;acc.forEach(function(item){item.addEventListener('click',function(){if(this.nextElementSibling.classList.contains('panelShow')){this.nextElementSibling.classList.remove('panelShow');this.firstChild.classList.remove("arrowUp");}else{acc.forEach(function(item){item.nextElementSibling.classList.remove('panelShow');item.firstChild.classList.remove("arrowUp");});this.nextElementSibling.classList.toggle('panelShow');this.firstChild.classList.toggle("arrowUp");}},false)})
let domain="";if(window.location.host.indexOf("www")!=-1||window.location.host.indexOf("press")!=-1||window.location.host.indexOf("forening")!=-1||window.location.host.indexOf("booking")!=-1){domain=window.location.host.split(".")[1]+"."+window.location.host.split(".")[2];}else{domain=window.location.host.split(".")[0]+"."+window.location.host.split(".")[1];}
function updateLanguageSettings(lgn){const d=new Date();const exdays=365;d.setTime(d.getTime()+(exdays*24*60*60*1000));let expires="expires="+d.toUTCString();document.cookie=`region=${lgn}; ${expires}; path=/; domain=.${domain}`;}
window.addEventListener("DOMContentLoaded",()=>{const btn=document.querySelectorAll(".js-btn");const overlay=document.querySelector(".booking__overlay");const closeIcon=document.querySelectorAll(".close");const frame=document.querySelector(".screen");const menu_icon=document.querySelector(".menu_icon");const menu=document.querySelector(".navigation");const subSubMenu=document.querySelectorAll(".subSubMenu");const subMenuAnchor=document.querySelectorAll(".subMenu__anchor");const header=document.querySelector(".main-header");const offer=document.querySelector(".test");const banner=document.querySelector(".hero__slider");const container=document.querySelector(".container");const sprog=document.querySelectorAll(".lang_chooser");const sprog_container=document.querySelectorAll(".lang_container");const afer=document.querySelector(".faqs_c");const faqs=document.querySelector(".faq_content");const afc=document.querySelector("#afc");const navicon=document.querySelectorAll(".navigation ul li a");const lang=document.querySelectorAll(".regionSelector-items a[data-language]");const regionSelector=document.querySelector(".regionSelector");const regionSelector_items=document.querySelector(".regionSelector-items");const sideNavigation__menu=document.querySelectorAll(".sideNavigation");let headerHeight;if(window.clientWidth>=250&&window.clientWidth<=800){headerHeight=document.querySelector(".main-header").clientHeight+document.querySelector(".test").clientHeight;}
window.addEventListener("scroll",function(e){if(window.location.host.indexOf("forening")==-1&&window.location.href.indexOf("/om-os/forening")==-1&&window.location.href.indexOf("tourdebrunsnaes")==-1){if(window.pageYOffset>offer.clientHeight){header.classList.add("--fixedHeader");if(container!=null){container.style.marginTop=header.clientHeight+"px"}
if(banner!=null){banner.style.top=header.clientHeight+"px";}}else if(window.pageXOffset<offer.clientHeight){header.classList.remove("--fixedHeader");if(container!=null){container.style.marginTop=null;}
if(banner!=null){banner.style.top=null;}}
if(window.innerWidth>=250&&window.innerWidth<=800){if(document.querySelector(".main-header").classList.contains("--fixedHeader")){headerHeight=document.querySelector(".main-header").clientHeight;}else{headerHeight=document.querySelector(".main-header").clientHeight+document.querySelector(".test").clientHeight;}
menu.style.height="calc(100vh - "+headerHeight+"px)";}}
if(sideNavigation__menu!==null){sideNavigation__menu.forEach((header)=>{if(window.pageYOffset>document.querySelector(".small-topHeader").clientHeight+
document.querySelector(".header").clientHeight+
document.querySelector(".small-topHeader").clientHeight){header.classList.add("--fixed");}else if(window.pageXOffset<header.clientHeight){header.classList.remove("--fixed");}});}})
navicon.forEach((nav)=>{nav.addEventListener("click",function(e,i){if(!this.classList.contains("lang_chooser")){this.classList.toggle("--active");}
if(this.href===undefined||this.href==="")return;let hashtag=this?.href?.match(/#[a-z]+/gi)[0];document.querySelector(hashtag).scrollIntoView();if(this.parentNode.parentNode.parentNode.classList.contains("lang_container")){this.parentNode.parentNode.parentNode.classList.remove("--active");this.parentNode.parentNode.parentNode.parentNode.querySelector(".arrow").classList.toggle("arrowUp");}})})
for(let i=0;i<subMenuAnchor.length;i++){subMenuAnchor[i].addEventListener("click",function(e){this.querySelector(".arrow").classList.toggle("arrowUp");subSubMenu[i].classList.toggle("--active");});document.addEventListener("click",function(e){if(e.target!=subSubMenu[i].parentNode.classList.contains("nav")){if(subSubMenu[i].parentNode.classList.contains("nav")){subSubMenu[i].parentNode.parentNode.classList.remove("--active");subSubMenu[i].parentNode.parentNode.querySelector(".arrow").classList.toggle("arrowUp");subSubMenu[i].parentNode.classList.toggle("--active");}}})}
regionSelector.addEventListener("click",function(){regionSelector_items.classList.toggle("--open");})
for(let i=0;i<lang.length;i++){lang[i].addEventListener("click",function(){let language=this.getAttribute("data-language");updateLanguageSettings(language);window.location.reload();})}
if(faqs!==null){var height=faqs.clientHeight+document.getElementById("afc").clientHeight;faqs.addEventListener("click",function(){if(afer.style.height==height+"px"){afer.style.height="90px";afer.style.bottom="10px";afer.style.right="10px";afer.style.width="90px";afer.style.borderRadius="50%";faqs.style.textAlign="center";afc.style.marginTop="42px";faqs.innerHTML='?';}else{faqs.style.textAlign="left";afer.style.bottom="0px";faqs.innerHTML="FAQ'S!";afer.style.width="100%";afer.style.height=height+"px";afer.style.borderRadius="0%";afc.style.marginTop="0px";}});}
document.addEventListener("keydown",function(e){if(e.keyCode==27){overlay.style.display="none";document.body.style.overflow="";document.querySelector(".screen").src="";document.querySelector(".screen").style.display="none";document.querySelector(".loading").style.display="flex";}});menu_icon.addEventListener("click",function(){if(document.querySelector(".sideNavigation__menu")!==null&&document.querySelector(".sideNavigation__menu").classList.contains("active")!==true){menu.classList.toggle("--active");document.body.classList.toggle("--hidden");document.querySelector("html").classList.toggle("--hidden");menu_icon.classList.toggle("--active");}else{menu.classList.toggle("--active");document.body.classList.toggle("--hidden");document.querySelector("html").classList.toggle("--hidden");menu_icon.classList.toggle("--active");}})
for(var i=0;i<navicon.length;i++){navicon[i].addEventListener("click",function(){if(!this.classList.contains("lang_chooser")){if(document.querySelector(".sideNavigation__menu")!==null&&document.querySelector(".sideNavigation__menu").classList.contains("active")!==true){menu.classList.toggle("--active");document.body.classList.toggle("--hidden");document.querySelector("html").classList.toggle("--hidden");menu_icon.classList.toggle("--active");}else{menu.classList.toggle("--active");document.body.classList.toggle("--hidden");document.querySelector("html").classList.toggle("--hidden");menu_icon.classList.toggle("--active");}}});}
for(let i=0;i<sprog.length;i++){sprog[i].addEventListener("click",function(){this.classList.toggle("--active");this.querySelector(".arrow").classList.toggle("arrowUp");sprog_container[i].classList.toggle("--active");});}
closeIcon.forEach((close)=>{close.addEventListener("click",()=>{overlay.style.display="";})})});
$('#email').on('keypress change',function(){$(this).val(function(index,val){checkMember(val);return this.value=val;});});$('#ccnum').on('keypress change',function(){$(this).val(function(index,value){let cards=document.querySelectorAll(".cards");for(let i=0;i<cards.length;i++){if(cards[i].getAttribute("data-card-type")==creditCardType(value)){cards[i].style.filter="saturate(1)";cards[i].style.display="inline-flex";}else{cards[i].style.filter="saturate(0)";cards[i].style.display="none";}}
if(this.value.length>=18){document.querySelector("#expmonth").focus();}
return value.replace(/\W/gi,'').replace(/(.{4})/g,'$1 ');});});$('#expmonth').on('keypress change',function(){$(this).val(function(index,value){if(this.value.length>=1){document.querySelector("#expyear").focus();}
return value.replace(/\W/gi,'').replace(/(.{2})/g,'$1');});});$('#expyear').on('keypress change',function(){$(this).val(function(index,value){if(this.value.length>=1){document.querySelector("#cvv").focus();}
return value.replace(/\W/gi,'').replace(/(.{2})/g,'$1');});});$('#cvv').on('keypress change',function(){if($('#expmonth').val()!==""&&$('#expyear').val()!==""&&$('#name').val()!==""&&$('#ccnum').val()!==""&&$('#email').val()!==""&&$('#cvv').val()!==""&&document.querySelector("#privacy").checked){document.querySelector(".subs_btn").disabled=false;}})
const process=document.getElementById("payment_process");const yourContainer=document.querySelector(".threeDCheck");const cardChooser=document.querySelectorAll(".choose__cards");for(let i=0;i<cardChooser.length;i++){cardChooser[i].addEventListener("change",function(){if(this.value=="new"){document.querySelector(".newCards").style.display="block";}else{document.querySelector(".newCards").style.display="none";}});}
function checkMember(i){const xhttp=new XMLHttpRequest();const url="https://www.cykelfaergen.info/om-os/forening/cykelfaergens-venner/find__medlemmer.php";xhttp.open("POST",url,true);xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){let message=JSON.parse(xhttp.responseText);if(message.exists){document.querySelector(".newCards").style.display="none";let stripeCustomerId=message.stripeCustomerId;let stripeSubsId=message.subscriptionID;let username=message.name;let cardId=message.cardId;let existsInput=document.createElement("input");existsInput.type="hidden";existsInput.name="exists";existsInput.value=message.exists;$('#payment_process').append(existsInput);if(stripeCustomerId!==""||cardId!==""){let stripeCustomerIdForm=document.createElement("input");stripeCustomerIdForm.type="hidden";stripeCustomerIdForm.value=stripeCustomerId;stripeCustomerIdForm.name="stripeCustomer";stripeCustomerIdForm.id="stripeCustomer";let stripeSubsIdForm=document.createElement("input");stripeSubsIdForm.type="hidden";stripeSubsIdForm.value=stripeSubsId;stripeSubsIdForm.name="stripeSubsId";stripeSubsIdForm.id="stripeSubsId";let cardIdForm=document.createElement("input");cardIdForm.type="hidden";cardIdForm.value=cardId;cardIdForm.name="cardId";cardIdForm.id="cardId";$('#payment_process').append(stripeCustomerIdForm);$('#payment_process').append(stripeSubsIdForm);$('#payment_process').append(cardIdForm);}else{document.querySelector(".newCards").style.display="block";document.querySelector(".subs_btn").disabled=false;}}else{document.querySelector(".newCards").style.display="block";}}else{document.querySelector(".payment__warning").innerHTML=this.textResponse;}}
xhttp.send("email="+i);}
function submit(){document.querySelector(".subs_btn").innerHTML='<i class="fa fa-spinner fa-spin-pulse"></i> processing...';var url="stoet-os/charge";let creditCardData=document.querySelector("#ccnum").value;let expireMonth=document.querySelector("#expmonth").value;let expireYear=document.querySelector("#expyear").value;let cvv=document.querySelector("#cvv").value;let password=document.querySelector("#password").value;if(creditCardData!=""||password!=""||expireMonth!=""||expireYear!=""||cvv!=""||document.querySelector("#cardId")!=null&&document.querySelector("#cardId")!=""){$.ajax({url:url,type:'post',data:$('#payment_process').serialize(),success:function(e){if(IsJsonString(e)){let data=JSON.parse(e);document.querySelector(".subs_btn").innerText="We are about to processing your data...";if(data.type=="3DSecure"){document.querySelector(".subs_btn").innerText="We are about to redirect you...";let url=data.url;window.location.href=url;}
if(e.indexOf("Subscribed")!=-1||e.indexOf("Renewed")!=-1){document.querySelector("#payment_process").reset();window.location.href="tak";}else if(data.type!="3DSecure"){window.location.href="tak";document.querySelector(".payment__warning").style.display="flex";document.querySelector(".subs_btn").innerHTML='<i class="fa fa-lock"></i>  Betal';}}else{document.querySelector(".payment__warning").style.display="flex";document.querySelector(".subs_btn").innerHTML='<i class="fa fa-lock"></i>  Betal';if(e.indexOf("Subscribed")!=-1||e.indexOf("Renewed")!=-1){document.querySelector("#payment_process").reset();document.querySelector(".subs_btn").disabled=false;window.location.href="tak";}else{document.querySelector(".payment__warning").innerHTML=e;}}},error:function(e){document.querySelector(".subs_btn").innerHTML='<i class="fa fa-lock"></i> Betal';console.log(e);}});}else{document.querySelector(".payment__warning").innerHTML="Please fill out all information!";document.querySelector(".payment__warning").style.display="flex";document.querySelector(".subs_btn").innerText="Subscribe";}}
if(process!==null){process.addEventListener("submit",function(e){e.preventDefault();gtag('event','conversion',{'send_to':'UA-179038498-3','event_label':'Subscription to Foreningen Cykelfærgen´s Venner','event_category':'Subscription','event_callback':function(){submit();}});});}
$('#email, #name, #expmonth, #expyear, #ccnum, #cvv, #privacy').on('keypress change',function(){if($('#email').val()!=""||$('#name').val()!=""&&$('#expmonth').val()!==""&&$('#expyear').val()!==""&&$('#name').val()!==""&&$('#ccnum').val()!==""&&$('#email').val()!==""&&$('#cvv').val()!==""){if(document.querySelector("#privacy").checked){document.querySelector(".subs_btn").disabled=false;}else{document.querySelector(".subs_btn").disabled=true;}}else{document.querySelector(".subs_btn").disabled=true;}})
function creditCardType(cc=""){var re=new RegExp("^4");if(cc.match(re)!=null)
return"Visa";if(/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(cc))
return"Mastercard";re=new RegExp("^3[47]");if(cc.match(re)!=null)
return"AMEX";re=new RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)");if(cc.match(re)!=null)
return"Discover";re=new RegExp("^36");if(cc.match(re)!=null)
return"Diners";re=new RegExp("^30[0-5]");if(cc.match(re)!=null)
return"Diners - Carte Blanche";re=new RegExp("^35(2[89]|[3-8][0-9])");if(cc.match(re)!=null)
return"JCB";re=new RegExp("^(4026|417500|4508|4844|491(3|7))");if(cc.match(re)!=null)
return"Visa";return"";}
function IsJsonString(str){try{JSON.parse(str);}catch(e){return false;}
return true;}
let currentSlide=0;const Timer=function(callback,delay){var timerId,start,remaining=delay;this.pause=function(){window.clearTimeout(timerId);timerId=null;remaining-=Date.now()-start;};this.resume=function(){if(timerId){return;}
start=Date.now();timerId=window.setTimeout(callback,remaining);};this.resume();};window.addEventListener("load",function(){"use strict";const slides=document.querySelectorAll(".hero__slider-slides");const slider=document.querySelectorAll(".hero__slider");let prevSlide=slides.length-1;let timer;if(slides.length>0){function slide(num=1){slides[prevSlide].style.left=""+(slides[currentSlide].clientWidth)+"px";document.querySelectorAll(".indicator")[prevSlide].style.backgroundColor="#e6e6e6";slides[prevSlide].style.zIndex="-1";prevSlide=(prevSlide+1)%slides.length;slides[prevSlide].style.left="-"+(slides[currentSlide].clientWidth)+"px";currentSlide=(currentSlide+1)%slides.length;slides[currentSlide].style.zIndex="";slides[currentSlide].style.left="0em";let currentS=currentSlide+num;document.querySelector(".num-indicator").innerHTML=currentS+" / "+slides.length;document.querySelectorAll(".indicator")[prevSlide].style.backgroundColor="#e6e6e6";document.querySelectorAll(".indicator")[currentSlide].style.backgroundColor="#046c6d";timer=new Timer(()=>{slide()},4000);}
let currentS=currentSlide+1;document.querySelector(".num-indicator").innerHTML=currentS+" / "+slides.length;for(let i=0;i<slides.length;i++){document.querySelector(".num").innerHTML+="<div class='indicator'></div>";if(i==currentS){document.querySelector(".indicator").style.backgroundColor="#046c6d";}}
timer=new Timer(()=>{slide()},4000);slider.forEach((slider)=>slider.addEventListener("mouseover",(e)=>{timer.pause()}));slider.forEach((slider)=>slider.addEventListener("mouseleave",(e)=>{timer.resume()}));}});
function getCookie(e){for(var n=e+"=",t=decodeURIComponent(document.cookie),r=t.split(";"),o=0;o<r.length;o++){for(var a=r[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return""}
const apiKey="7f58b0b29e6124649f3c0b055c72a08b";const url="https://api.openweathermap.org/data/2.5/forecast";const dailyurl="https://api.openweathermap.org/data/2.5/forecast/daily";const container=document.querySelector(".weather");const lat="54.898683816905105";const lon="9.597868465963916";let lang="da";dateFormatLang='da-DK';if(window.location.host.indexOf("bicycleferry.com")>-1||getCookie("region")=="en-GB"){lang="en";dateFormatLang=(getCookie("region"))?getCookie("region"):"en-GB";}else if(window.location.host.indexOf("fahrradfaehre.info")>-1||getCookie("region")=="de-DE"){lang="de";dateFormatLang=(getCookie("region"))?getCookie("region"):"de-DE";}
fetch(`${url}?lat=${lat}&lon=${lon}&units=metric&lang=${lang}&appid=${apiKey}`).then((r)=>{return r.json();}).then((response)=>{const weatherData=response.list[0];let options={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",};container.innerHTML=`
        <p>
            <img src="https://openweathermap.org/img/w/${weatherData.weather[0].icon}.png">
            <span class="temp">${ Math.round(weatherData.main.temp) } &#8451;</span> <br>
            ${  response.city.name }
        </p>
    `;if(document.querySelector(".weather-forcast")!=null){response.list.forEach((element,i)=>{document.querySelector(".weather-forcast").innerHTML+=`
                <div class="forcast">
                    <p>${new Intl.DateTimeFormat(dateFormatLang, options).format(new Date(element.dt_txt))}</p>
                    <img src="https://openweathermap.org/img/w/${element.weather[0].icon}.png">
                    <p>
                        <span class="temp">${Math.round(element.main.temp)}&#8451;</span>
                    </p>
                </div>
            `;});document.querySelector(".city").innerText=response.city.name;}})
function getCookie(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1);}
if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}
return"";}